<template>
  <div v-wechat-title="title">
    <div class="dy-top">
      <x-header @on-click-back="goToBack" :left-options="{backText: '',preventGoBack: true}">{{title}}</x-header>
    </div>
    <AllConsultation v-if="title === '全部会诊信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllConsultation>
    <AllOperDemo v-if="title === '全部手术演示信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllOperDemo>
    <AllIecture v-if="title === '全部讲课信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllIecture>
    <AllTopic v-if="title === '全部参与课题信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllTopic>
    <AllPaper v-if="title === '全部论文发表信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllPaper>
    <AllLearning v-if="title === '全部学术参与信息'" :personId="personId" :isEdit="isEdit" :backField="backField">{{title}}</AllLearning>
  </div>
</template>
<script>
  import AllConsultation from '@/components/AllConsultation'
  import AllOperDemo from '@/components/AllOperDemo'
  import AllIecture from '@/components/AllIecture'
  import AllTopic from '@/components/AllTopic'
  import AllPaper from '@/components/AllPaper'
  import AllLearning from '@/components/AllLearning'
  export default {
    name: 'SeeAll',
    data() {
      return{
        title: '',
        personId:'',
        isEdit: this.$route.params.isEdit,
        isOpen:'',
        backField:{}
      }
    },
    mounted () {
      if (this.$route.params.backField) {
        this.title = this.$route.params.title || this.$route.meta.title
        this.personId = this.$route.params.id;
        this.isEdit = this.$route.params.isEdit;
        this.isOpen = this.$route.params.isOpen;
        this.backField = this.$route.params.backField;
      } else {
        this.title = this.$route.query.title || this.$route.meta.title
        this.personId = this.$route.query.id;
        this.isEdit = this.$route.query.isEdit;
        this.isOpen = this.$route.query.isOpen;
        this.backField = this.$route.query.backField;
      }

    },
    methods:{
      goToBack(){
        this.$router.push({
          path:'/userInfo/'+this.personId+'/follow-details/'+this.personId,
          query: {
            isOpen:this.isOpen,
            previousPage:this.backField.previousPage,
            subId:this.backField.subId
          }
        })
        sessionStorage.setItem('tabIndex', '3')
      }

    },
    components: {AllConsultation, AllOperDemo, AllIecture, AllPaper, AllTopic,AllLearning},

  }
</script>

<style lang="less"></style>
