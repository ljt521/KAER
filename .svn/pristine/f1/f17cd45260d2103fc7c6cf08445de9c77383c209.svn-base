<!--跟进详情-->
<template>
  <div class="fo-top">
    <div class="fo-div" style="position: relative">
      <datetime style="width: 40%" v-model="value5" :title="'年份'" :min-year=2000 :max-year=2099 format="YYYY"
                @on-change="change"
                year-row="{value}年" confirm-text="完成" cancel-text="取消"></datetime>
      <span style="position: absolute;top: 12px;right: 20px;font-size: 13px;">共 {{sumData.data1*1+sumData.data2*1+sumData.data3*1+sumData.data4*1+sumData.data5*1+sumData.data6*1}}条跟进信息</span>
    </div>
    <!--会诊信息-->
    <div class="fo-div">
      <cell
        :title="'会诊信息('+ sumData.data1 + ')'"
        :border-intent="false"
        is-link
        :arrow-direction="showContent1 ? 'up' : 'down'"
        @click.native="showContent1 = !showContent1">
        <img slot="icon" width="20" style="display:block;margin-right:5px;"
             src="../assets/image/follow_up_consultation.png" alt="">
      </cell>
      <swipeout class="slide" :class="showContent1?'animate':''">
        <swipeout-item transition-mode="follow"  ref="swipeoutItem"  v-for="(data, index) in contentData.contentData1" :key="index" >
          <div slot="right-menu" >
            <swipeout-button @click.native="onButtonClick('/new-consul-info',data)" type="primary" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-consul-info',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span>
              <div-span class="fo-span-top" v-bind:dictCode="'SSMC'"
                        v-bind:dictItemCode="data.operationName"></div-span>
              <span
                style="float: right;font-size: 12px;color: #BFBFBF;">{{data.consultationDate | formatDate}}</span>
              <div class="ka-details">
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_role.png" alt="" >
                  <div-span v-bind:dictCode="'SSJS'" v-bind:dictItemCode="data.operativeRole"></div-span>
                </div>
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_position.png" alt="" >
                  <hos-span v-bind:code="data.operationLocal"></hos-span>
                </div>
              </div>
              <div class="ka-details">
                <div class="ka-details-items" style="margin-right: 0;width: 100%;">
                  <img class="icon-5" src="../assets/image/follow_up_product_information.png" alt="">
                  <div style="overflow: hidden;text-overflow: ellipsis;">
                    <template v-for="dataList in contentData.contentData1">
                      <template v-for="(data, index) in dataList.product[0]">
                        <div-span v-bind:dictCode="'CPXX'" v-bind:dictItemCode="data"></div-span>
                        <div-span v-bind:dictCode="'CPPP'" v-bind:dictItemCode="dataList.product[1][index]"></div-span>
                      </template>
                    </template>
                  </div>
                </div>
              </div>

            </div>

          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部会诊信息',id:customerId,isOpen:'showContent1',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <!--手术演示-->
    <div class="fo-div">
      <cell
        :title="'手术演示信息('+ sumData.data2 + ')'"
        is-link
        :border-intent="false"
        :arrow-direction="showContent2 ? 'up' : 'down'"
        @click.native="showContent2 = !showContent2">
        <img slot="icon" width="20" style="display:block;margin-right:5px;"
             src="../assets/image/follow_up_operation_demonstration.png" alt="">
      </cell>

      <swipeout class="slide" :class="showContent2?'animate':''">
        <swipeout-item transition-mode="follow"  ref="swipeoutItem" v-for="(data, index) in contentData.contentData2" :key="index"  >
          <div slot="right-menu" >
            <swipeout-button @click.native="onButtonClick('/new-oper-demo',data)" type="primary" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-oper-demo',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span>
              <span class="fo-span-top">
              <div-span v-bind:dictCode="'SSMC'" v-bind:dictItemCode="data.operationName"></div-span>
              </span>
              <span style="float: right;font-size: 12px;color: #BFBFBF;">{{data.createdDate|formatDate}}</span>
              <!--结果显示-->
              <div class="ka-details">
                <div class="ka-details-items">
                    <img class="icon-5" src="../assets/image/follow_up_role.png" alt="">
                    <div-span v-bind:dictCode="'SSJS'" v-bind:dictItemCode="data.roleinOperation"></div-span>
                </div>
                  <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_position.png" alt="">
                  <div-span v-bind:dictCode="'CH'" v-bind:dictItemCode="data.demoOccasion"></div-span>
                </div>
              </div>
              <div class="ka-details">
                <div class="ka-details-items" style="margin-right: 0;width: 100%">
                  <img class="icon-5" src="../assets/image/follow_up_product_information.png" alt="">
                  <div style="overflow: hidden;text-overflow: ellipsis">
                    <template v-for="dataList in contentData.contentData2">
                      <template v-for="(data, index) in dataList.product[0]">
                        <div-span v-bind:dictCode="'CPXX'" v-bind:dictItemCode="data"></div-span>
                        <div-span v-bind:dictCode="'CPPP'" v-bind:dictItemCode="dataList.product[1][index]"></div-span>
                      </template>
                    </template>

                  </div>
                </div>

              </div>

            </div>
          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部手术演示信息',id:customerId,isOpen:'showContent2',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <!--讲课信息-->
    <div class="fo-div">
      <cell
        :title="'讲课信息('+ sumData.data3 + ')'"
        is-link
        :border-intent="false"
        :arrow-direction="showContent3 ? 'up' : 'down'"
        @click.native="showContent3 = !showContent3">
        <img slot="icon" width="20" style="display:block;margin-right:5px;" src="../assets/image/follow_up_lecture.png"
             alt="">
      </cell>

      <swipeout class="slide" :class="showContent3?'animate':''">
        <swipeout-item transition-mode="follow"  ref="swipeoutItem" v-for="(data, index) in contentData.contentData3" :key="index">
          <div slot="right-menu" >
            <swipeout-button type="primary" @click.native="onButtonClick('/new-iecture',data)" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-iecture',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span><span class="fo-span-top">{{data.lessonName}}</span><span
              style="float: right;font-size: 12px;color: #BFBFBF;">{{data.createdDate|formatDate}}</span>
              <div class="ka-details">
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_role.png" alt="">{{data.operativeType}}
                </div>
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_position.png" alt="">
                  <div-span v-bind:dictCode="'CH'" v-bind:dictItemCode="data.lectureLocal"></div-span>
                </div>
              </div>
              <div class="ka-details">
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_product_information.png" alt="">
                  <div style="overflow: hidden;text-overflow: ellipsis">
                    <template v-for="dataList in contentData.contentData3">
                      <template v-for="(data, index) in dataList.product[0]">
                        <div-span v-bind:dictCode="'CPXX'" v-bind:dictItemCode="data"></div-span>
                        <div-span v-bind:dictCode="'CPPP'" v-bind:dictItemCode="dataList.product[1][index]"></div-span>
                      </template>
                    </template>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部讲课信息',id:customerId,isOpen:'showContent3',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <!--参与课题-->
    <div class="fo-div">
      <cell
        :title="'参与课题信息('+ sumData.data4 + ')'"
        is-link
        :border-intent="false"
        :arrow-direction="showContent4 ? 'up' : 'down'"
        @click.native="showContent4 = !showContent4">
        <img slot="icon" width="20" style="display:block;margin-right:5px;" src="../assets/image/follow_up_research.png"
             alt="">
      </cell>

      <swipeout class="slide" :class="showContent4?'animate':''">
        <swipeout-item transition-mode="follow"  ref="swipeoutItem" v-for="(data, index) in contentData.contentData4" :key="index">
          <div slot="right-menu" >
            <swipeout-button type="primary" @click.native="onButtonClick('/new-topic',data)" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-topic',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span>
              <span class="fo-span-top">{{data.researchName }}</span>
                <div class="ka-details">
                  <div class="ka-details-items">
                    <img class="icon-5" src="../assets/image/follow_up_topic_type.png" alt="">
                    <div-span v-bind:dictCode="'KTLX'" v-bind:dictItemCode="data.researchType"></div-span>
                  </div>
                  <div class="ka-details-items">
                    <img class="icon-5" src="../assets/image/follow_up_participation_mode.png" alt="">
                    <div-span v-bind:dictCode="'CYFS'" v-bind:dictItemCode="data.partakeMode"></div-span>
                  </div>
                  <div class="ka-details-items">
                    <icon class="icon-5" style="color: #888888;font-size: 15px;" type="waiting-circle"></icon>
                    {{data.beginDate|formatDate}}
                  </div>
                </div>
            </div>
          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部参与课题信息',id:customerId,isOpen:'showContent4',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <!--论文发表-->
    <div class="fo-div">
      <cell
        :title="'论文发表信息('+ sumData.data5 + ')'"
        is-link
        :border-intent="false"
        :arrow-direction="showContent5 ? 'up' : 'down'"
        @click.native="showContent5 = !showContent5">
        <img slot="icon" width="20" style="display:block;margin-right:5px;" src="../assets/image/follow_up_paper.png"
             alt="">
      </cell>

      <swipeout class="slide" :class="showContent5?'animate':''">
        <swipeout-item transition-mode="follow"   ref="swipeoutItem" v-for="(data, index) in contentData.contentData5" :key="index">
          <div slot="right-menu" >
            <swipeout-button type="primary" @click.native="onButtonClick('/new-paper',data)" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-paper',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span><span class="fo-span-top">{{data.paperName }}</span>
              <p style="margin: 10px 0">
                <div class="ka-details">
                  <div class="ka-details-items">
                    <img class="icon-5" src="../assets/image/follow_up_role.png" alt="">
                    <div-span v-bind:dictCode="'SMFS'" v-bind:dictItemCode="data.signType"></div-span>
                  </div>
                  <div class="ka-details-items">
                    <img class="icon-5" src="../assets/image/follow_up_position.png" alt="">
                    <div-span v-bind:dictCode="'QK'" v-bind:dictItemCode="data.periodicalType"></div-span>
                  </div>
                  <div class="ka-details-items">
                    <icon style="color: #888888;font-size: 15px;" type="waiting-circle"></icon>
                    {{data.paperYear}}
                  </div>
              </div>
            </div>
          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部论文发表信息',id:customerId,isOpen:'showContent5',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <!--学术参与-->
    <div class="fo-div">
      <cell
        :title="'学术参与信息('+ sumData.data6 + ')'"
        is-link
        :border-intent="false"
        :arrow-direction="showContent6 ? 'up' : 'down'"
        @click.native="showContent6 = !showContent6">
        <img slot="icon" width="20" style="display:block;margin-right:5px;" src="../assets/image/follow_up_learning.png"
             alt="">
      </cell>

      <swipeout class="slide" :class="showContent6?'animate':''">
        <swipeout-item transition-mode="follow" v-for="(data, index) in contentData.contentData6" :key="index" >
          <div slot="right-menu" >
            <swipeout-button type="primary" @click.native="onButtonClick('/new-learning',data)" style="font-size: 13px;">编辑</swipeout-button>
            <swipeout-button v-if="$datedifference(data.createdDate) < 30" type="warn" @click.native="deleteInfo('/new-learning',data.id)" style="font-size: 13px;">删除</swipeout-button>
          </div>
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div class="fo-tex">
              <span class="fo-span"></span><span class="fo-span-top">{{data.activityName}}</span>
              <div class="ka-details">
                <div class="ka-details-items">
                  <img class="icon-5" src="../assets/image/follow_up_role.png" alt="">
                  <div-span v-bind:dictCode="'CH'" v-bind:dictItemCode="data.academicActivityType"></div-span>
                </div>
                <div class="ka-details-items">
                  <img class="fo-img-size" src="../assets/image/follow_up_role.png" alt="">
                  <div-span v-bind:dictCode="'SSJS'" v-bind:dictItemCode="data.participantRoles"></div-span>
                </div>
                <div class="ka-details-items">
                  <icon style="color: #888888;font-size: 15px;" type="waiting-circle"></icon>
                  {{data.academicDate}}
                </div>
              </div>
            </div>
          </div>
        </swipeout-item>
        <swipeout-item transition-mode="follow">
          <div slot="content" class="vux-1px-t" style="padding:12px;">
            <div @click="goToSeeAll({title:'全部学术参与信息',id:customerId,isOpen:'showContent6',backField:backField})" style="color: #074089;">查看更多</div>
          </div>
        </swipeout-item>
      </swipeout>
    </div>
    <div v-if="isEdit" class="fo-add" @click="openDiaLog(customerId)">+</div>
    <new-dia-log ref="NewDiaLog"></new-dia-log>
  </div>
</template>
<script>
  export default {
    name: 'FollowDetails',
    data () {
      return {
        customerId: this.$route.params.id || this.$route.query.id,
        isEdit: false,
        backField: this.$route.query,
        value5: '',
        showContent1: false,
        showContent2: false,
        showContent3: false,
        showContent4: false,
        showContent5: false,
        showContent6: false,
        sumData: {
          data1: 0,
          data2: 0,
          data3: 0,
          data4: 0,
          data5: 0,
          data6: 0,
        },
        contentData: {
          contentData1: [],
          contentData2: [],
          contentData3: [],
          contentData4: [],
          contentData5: [],
          contentData6: [],
        }
      }
    },
    created () {
      this.getCustomer(this.customerId)
      this.getConsultation()
      this.getOperationDemoInfo()
      this.getIectureInfo()
      this.getPartakeResearch()
      this.getPaperPublishInfo()
      this.getAcademicJoin()
      switch (this.$route.query.isOpen) {
        case 'showContent1':
          this.showContent1 = true;
          break
        case 'showContent2':
          this.showContent2 = true;
          break
        case 'showContent3':
          this.showContent3 = true;
          break
        case 'showContent4':
          this.showContent4 = true;
          break
        case 'showContent5':
          this.showContent5 = true;
          break
        case 'showContent6':
          this.showContent6 = true;
          break
      }
    },
    methods: {
      getCustomer (id) {
        this.$get('/api/customer/' + this.customerId).then(info => {
          this.customerData =info;
          this.isEdit=info.isEdit;
          if(info.isEdit*1){
            if(this.$refs.swipeoutItem && this.$refs.swipeoutItem.length){
              this.$refs.swipeoutItem.forEach(val=>{
                val.isOpen=false;
              })
            }
          }else{
            if(this.$refs.swipeoutItem && this.$refs.swipeoutItem){
              this.$refs.swipeoutItem.forEach(val=>{
                val.isOpen=true;
              })
            }
          }
        })
      },
      // 会诊信息
      getConsultation () {
        this.$search('/api/Consultation', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.customerId}).then(request => {
          this.contentData.contentData1 = this.$sortData(request)
          this.sumData.data1 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },
      // 手术演示
      getOperationDemoInfo () {
        this.$search('/api/OperationDemoInfo', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.customerId}).then(request => {
          this.contentData.contentData2 = this.$sortData(request)
          this.sumData.data2 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },
      // 讲课
      getIectureInfo () {
        this.$search('/api/lectureInfo', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.$route.params.id}).then(request => {
          this.contentData.contentData3 = this.$sortData(request)
          this.sumData.data3 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },
      getPartakeResearch () {
        this.$search('/api/partakeResearch', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.$route.params.id}).then(request => {
          this.contentData.contentData4 = request
          this.sumData.data4 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },
      getPaperPublishInfo () {
        this.$search('/api/PaperPublishInfo', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.customerId}).then(request => {
          this.contentData.contentData5 = request
          this.sumData.data5 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },
      // 学术参与
      getAcademicJoin () {
        this.$search('/api/AcademicJoin', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {'customer.id': this.customerId}).then(request => {
          this.contentData.contentData6 = request
          this.sumData.data6 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        })
      },

      change (value) {
        /*时间约束*/
        let start = value + '-01-01T00:00:00.000'
        let end = value + '-12-31T23:59:59.999'
        //会诊信息
        this.$search('/api/Consultation', {
          sort: 'createdDate,DESC',
          page: 0,
          size: 2
        }, {
          'customer.id': this.$route.params.id,
          'createdDate-le': end,
          'createdDate-ge': start
        }).then(request => {
          this.contentData.contentData1 = this.$sortData(request)
          this.sumData.data1 = this.$headers['x-total-count']
        }).catch(error => {
          console.log(error)
        }),
          //手术演示信息
          this.$search('/api/OperationDemoInfo', {
            sort: 'createdDate,DESC',
            page: 0,
            size: 2
          }, {
            'customer.id': this.$route.params.id,
            'createdDate-le': end,
            'createdDate-ge': start
          }).then(request => {
            this.contentData.contentData2 = this.$sortData(request)
            this.sumData.data2 = this.$headers['x-total-count']
          }).catch(error => {
            console.log(error)
          }),
          //讲课信息
          this.$search('/api/lectureInfo', {
            sort: 'createdDate,DESC',
            page: 0,
            size: 2
          }, {
            'customer.id': this.$route.params.id,
            'createdDate-le': end,
            'createdDate-ge': start
          }).then(request => {
            this.contentData.contentData3 = this.$sortData(request)
            this.sumData.data3 = this.$headers['x-total-count']
          }).catch(error => {
            console.log(error)
          }),
          //参与课题信息
          this.$search('/api/partakeResearch', {
            sort: 'createdDate,DESC',
            page: 0,
            size: 2
          }, {
            'customer.id': this.$route.params.id,
            'createdDate-le': end,
            'createdDate-ge': start
          }).then(request => {
            this.contentData.contentData4 = request
            this.sumData.data4 = this.$headers['x-total-count']
          }).catch(error => {
            console.log(error)
          }),
          //论文发表信息
          this.$search('/api/PaperPublishInfo', {
            sort: 'createdDate,DESC',
            page: 0,
            size: 2
          }, {
            'customer.id': this.$route.params.id,
            'createdDate-le': end,
            'createdDate-ge': start
          }).then(request => {
            this.contentData.contentData5 = request
            this.sumData.data5 = this.$headers['x-total-count']
          }).catch(error => {
            console.log(error)
          }),
          //学术参与信息
          this.$search('/api/AcademicJoin', {
            sort: 'createdDate,DESC',
            page: 0,
            size: 2
          }, {
            'customer.id': this.$route.params.id,
            'createdDate-le': end,
            'createdDate-ge': start
          }).then(request => {
            this.contentData.contentData6 = request
            this.sumData.data6 = this.$headers['x-total-count']
          }).catch(error => {
            console.log(error)
          })

      },
      onButtonClick (e, data) {
        switch (e) {
          case '/new-consul-info':
            this.$router.push({
              name: 'NewConsulInfo',
              params: {
                title: '编辑会诊',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1
              }
            })
            break
          case '/new-oper-demo':
            this.$router.push({
              name: 'NewOperDemo',
              params: {
                title: '编辑手术演示',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1,
                subId:this.backField.subId
              }
            })
            break
          case '/new-iecture':
            this.$router.push({
              name: 'NewIecture',
              params: {
                title: '编辑讲课',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1
              }
            })
            break
          case '/new-paper':
            this.$router.push({
              name: 'NewPaper',
              params: {
                title: '编辑论文发表',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1
              }
            })
            break
          case '/new-topic':
            this.$router.push({
              name: 'NewTopic',
              params: {
                title: '编辑参与课题',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1
              }
            })
            break
          case '/new-learning':
            this.$router.push({
              name: 'NewLearning',
              params: {
                title: '编辑学术参与',
                data: data,
                backField: this.backField,
                isEdit:this.isEdit,
                start: 1,

              }
            })
            break
          default:
            this.$router.push({path: e})
        }
      },
      deleteInfo (path, id) {
        let that = this
        switch (path) {
          case '/new-consul-info':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/Consultation/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getConsultation()
                }).catch(err => {
                })
              }
            })
            break
          case '/new-oper-demo':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/OperationDemoInfo/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getOperationDemoInfo()
                }).catch(err => {
                })
              }
            })
            break
          case '/new-iecture':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/lectureInfo/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getIectureInfo()
                }).catch(err => {
                })
              }
            })
            break
          case '/new-paper':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/PaperPublishInfo/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getPaperPublishInfo()
                }).catch(err => {
                })
              }
            })
            break
          case '/new-topic':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/partakeResearch/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getPartakeResearch()
                }).catch(err => {
                })
              }
            })
            break
          case '/new-learning':
            that.$vux.confirm.show({
              title: '操作提醒',
              content: '是否确认删除?',
              onConfirm () {
                that.$del('/api/AcademicJoin/' + id).then(val => {
                  that.$vux.toast.text('删除成功', 'middle')
                  that.getAcademicJoin()
                }).catch(err => {
                })
              }
            })
            break

        }

      },
      goToSeeAll (info) {
        this.$router.push({
          name: 'SeeAll',
          params: {
            title: info.title,
            id: info.id,
            isEdit: this.isEdit,
            isOpen:info.isOpen,
            backField:info.backField
          }
        })
      },
      openDiaLog (id) {
        let self = this
        self.$refs['NewDiaLog'].isShowDia(true, id)
      }
    },
  }
</script>

<style lang="less">
  @import '~vux/src/styles/close';

  .fo-top {
    margin: 0 15px;
    .fo-img-size {
      width: 15px;
      height: 15px;
      vertical-align: center;
    }
    p {
      margin: 0;
      text-align: left;
    }
    .fo-div {
      background-color: #fff;
      margin-bottom: 5px;
      .fo-tex {
        text-align: left;
        .fo-span {
          display: inline-block;
          width: 2px;
          height: 13px;
          margin-right: 5px;
          background-color: #074089;
        }
        .flex-demo {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        p {
          color: #888888;
          font-size: 13px;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          .right {
            margin-right: 30px;
            img {
              vertical-align: middle;
              margin-right: 5px;
            }
          }
        }

      }
    }
    .fo-add {
      width: 50px;
      background-color: #fff;
      border-radius: 50%;
      position: fixed;
      right: 15px;
      bottom: 20px;
      /*transform: translateX(35px);*/
      margin-bottom: 10px;
      box-shadow: 1px 1px 1px 1px #ccc;
      color: #073f89;
      line-height: 50px;
      font-size: 30px;
    }
    .dialog-demo {
      .weui-dialog {
        border-radius: 8px;
        padding-bottom: 8px;
      }
      .dialog-title {
        line-height: 30px;
        color: #666;
      }
      .img-box {
        overflow: hidden;
      }
    }
  }

  .weui-grids:before, .weui-grid:after {
    content: none;
  }

  .weui-grid {
    text-decoration: none;
  }

  .slide {
    padding: 0;
    overflow: hidden;
    max-height: 0;
    transition: max-height .5s cubic-bezier(0, 1, 0, 1) -.1s;
  }

  .animate {
    max-height: 9999px;
    transition-timing-function: cubic-bezier(0.5, 0, 1, 0);
    transition-delay: 0s;
  }

  .fo-span-top {
    position: relative;
    top: -2px;
  }
  .ka-details{
    margin: 10px 0;
    display: flex;
  }
  .ka-details-items{
    display: flex;
    align-items: center;
    margin-right: 30px;
    color: #888888;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .icon-5{
    margin-right: 5px;
    width: 15px;
    height: 15px;
  }


</style>
